<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ìƒì¡´ì ìƒì„¸ ì •ë³´</title>
    <link rel="stylesheet" href="style.css">
    <script>
        // ë¡œê·¸ì¸ ì²´í¬ ë° ë‹‰ë„¤ì„ í‘œì‹œ (ì´ ë¶€ë¶„ì´ ë¹ ì ¸ìˆì—ˆìŠµë‹ˆë‹¤!)
        (function() {
            const status = localStorage.getItem("loginStatus");
            const nick = localStorage.getItem("userNick");

            // ë¡œê·¸ì¸ ì•ˆ í–ˆìœ¼ë©´ ì«“ì•„ë‚´ê¸°
            if (!status) { location.href = "index.html"; }

            window.addEventListener('load', function() {
                // 1. ë„¤ë¹„ê²Œì´ì…˜ ë°”ì— ë‚´ ì´ë¦„ í‘œì‹œí•˜ê¸°
                const badge = document.getElementById("userBadge");
                if (badge && nick) {
                    if (status === "admin") {
                        badge.innerText = `[ê´€ë¦¬ì ëª¨ë“œ]`;
                        badge.style.color = "#ff0000";
                    } else {
                        badge.innerText = `[${nick}]`;
                        badge.style.color = "#cccccc";
                    }
                    badge.style.display = "inline";
                }

                // 2. í”„ë¡œí•„ ì •ë³´ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤í–‰
                loadProfile();
            });
        })();
    </script>
</head>
<body class="profile-page">
    
    <nav class="navbar">
        <div class="logo">
            OUT BREAK
            <span id="userBadge" style="display: none; font-size: 14px; margin-left: 10px; vertical-align: middle;"></span>
        </div>
        <ul class="nav-links">
            <li><a href="main.html">í™ˆ</a></li>
            <li><a href="sub.html">ìƒì¡´ìëª©ë¡</a></li>
            <li><a href="board.html">ìµëª…ê²Œì‹œíŒ</a></li>
            <li><a href="quest.html">ì˜ë¢°ê²Œì‹œíŒ</a></li>
            <li><a href="game.html">ë‚šì‹œí„°</a></li>
            <li><a href="#" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</a></li>
        </ul>
    </nav>

    <div class="profile-container">
        <a href="sub.html" class="back-btn">â—€ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>

        <div class="profile-content">
            <div class="profile-left">
                <img id="pImg" src="" onerror="this.src='https://i.imgur.com/3SPL075.png'">
                <div class="profile-status" id="pStateBadge">ìƒì¡´</div>
            </div>

            <div class="profile-right">
                <h1 id="pName">ì´ë¦„ ë¡œë”©ì¤‘...</h1>
                <h3 id="pRole">ì§ì—…/ì—­í• </h3>
                <hr style="border: 0.5px solid #555; margin: 20px 0;">
                
                <div class="profile-detail-box">
                    <p><strong>íŠ¹ì´ì‚¬í•­:</strong> <span id="pDesc">ë‚´ìš© ì—†ìŒ</span></p>
                    <p style="margin-top:20px;"><strong>ìµœê·¼ í™œë™ ê¸°ë¡:</strong></p>
                    <ul class="activity-log">
                        <li>2026.01.15 - ì˜ë¢° ê²Œì‹œíŒ ì ‘ì† í™•ì¸</li>
                        <li>2026.01.12 - ì‹ëŸ‰ ì°½ê³ ì—ì„œ ëª©ê²©ë¨</li>
                    </ul>
                </div>

                <div class="profile-actions">
                    <button onclick="alert('ì¤€ë¹„ ì¤‘ì¸ ê¸°ëŠ¥ì…ë‹ˆë‹¤ (ìª½ì§€ ë³´ë‚´ê¸°)')">ğŸ“© ìª½ì§€ ë³´ë‚´ê¸°</button>
                    <button onclick="alert('ì¤€ë¹„ ì¤‘ì¸ ê¸°ëŠ¥ì…ë‹ˆë‹¤ (ì¹œêµ¬ ì¶”ê°€)')">ğŸ¤ ë™ë£Œ ìš”ì²­</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // sub.htmlê³¼ ë™ì¼í•œ ë°ì´í„° (ë‚˜ì¤‘ì—” í†µí•© ì˜ˆì •)
        const survivors = [
            { name: "ê´€ë¦¬ì", role: "ì´ê´„ ë¦¬ë”", state: "ìƒì¡´", img: "image/admin.png", desc: "ì´ êµ¬ì—­ì˜ ê´€ë¦¬ìì…ë‹ˆë‹¤. ëª¨ë“  ê¶Œí•œì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤." },
            { name: "ëŸ¬ë„ˆ1", role: "ìˆ˜ìƒ‰ëŒ€", state: "ìƒì¡´", img: "image/runner1.jpg", desc: "ë°œì´ ë¹ ë¥´ê³  ì§€ë¦¬ì— ë°ìŒ. ì£¼ë¡œ ë‚® ì‹œê°„ì— í™œë™í•¨." },
            { name: "ëŸ¬ë„ˆ2", role: "ì „íˆ¬ì›", state: "ë¶€ìƒ", img: "image/fighter.jpg", desc: "í˜„ì¬ ë‹¤ë¦¬ë¥¼ ë‹¤ì³ ì¹˜ë£Œ ì¤‘. ì „íˆ¬ë ¥ì€ ë†’ìœ¼ë‚˜ ì´ë™ ë¶ˆê°€." },
            { name: "ë‹¥í„°K", role: "ì˜ë¬´ë³‘", state: "ìƒì¡´", img: "", desc: "ì‘ê¸‰ ì²˜ì¹˜ ì „ë¬¸ê°€. Bë™ 101í˜¸ì— ê±°ì£¼ ì¤‘." },
            { name: "ì‰í”„", role: "ì¡°ë¦¬ì¥", state: "ìƒì¡´", img: "image/cook.png", desc: "í†µì¡°ë¦¼ ìš”ë¦¬ì˜ ë‹¬ì¸. ì‹ëŸ‰ ë°°ê¸‰ ë‹´ë‹¹." },
            { name: "ìƒì¡´ì1", role: "ì¼ë°˜ ì‹œë¯¼", state: "ìƒì¡´", img: "image/user1.png", desc: "íŠ¹ë³„í•œ íŠ¹ì´ì‚¬í•­ ì—†ìŒ." }
        ];

        // 20ëª… ë”ë¯¸ ë°ì´í„° ìƒì„± (sub.htmlê³¼ ë˜‘ê°™ì´ ë§ì¶°ì•¼ ì—ëŸ¬ê°€ ì•ˆ ë‚©ë‹ˆë‹¤)
        for(let i=2; i<=15; i++) {
            survivors.push({
                name: `ìƒì¡´ì${i}`,
                role: "ì¼ë°˜ ì‹œë¯¼",
                state: "ìƒì¡´",
                img: `image/user${i}.png`, 
                desc: "íŠ¹ë³„í•œ íŠ¹ì´ì‚¬í•­ ì—†ìŒ."
            });
        }

        function loadProfile() {
            // 1. ì£¼ì†Œì°½ì—ì„œ ?name=ëˆ„êµ¬ ì¸ì§€ ì•Œì•„ë‚´ê¸°
            const params = new URLSearchParams(window.location.search);
            const targetName = params.get('name');

            if (!targetName) return; // ì´ë¦„ì´ ì—†ìœ¼ë©´ ì¤‘ë‹¨

            // 2. ëª…ë‹¨ì—ì„œ ê·¸ ì‚¬ëŒ ì°¾ê¸°
            const person = survivors.find(p => p.name === targetName);

            // 3. í™”ë©´ì— ë¿Œë¦¬ê¸°
            if (person) {
                document.getElementById('pName').innerText = person.name;
                document.getElementById('pRole').innerText = person.role;
                document.getElementById('pDesc').innerText = person.desc;
                document.getElementById('pImg').src = person.img;
                
                const badge = document.getElementById('pStateBadge');
                badge.innerText = person.state;
                if(person.state === "ë¶€ìƒ") badge.style.backgroundColor = "orange";
                else if(person.state === "ì‚¬ë§") badge.style.backgroundColor = "red";
            } else {
                alert("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ìƒì¡´ìì…ë‹ˆë‹¤.");
                location.href = "sub.html";
            }
        }

        function logout() {
            localStorage.removeItem("loginStatus");
            location.href = "index.html";
        }
    </script>
</body>
</html>