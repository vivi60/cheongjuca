<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>생존자 목록</title>
    <link rel="stylesheet" href="style.css"> 
    <script>
        // 페이지가 열리자마자 로그인 상태 확인
// 모든 서브 페이지 상단 <script> 태그 내
(function() {
    // 1. 저장된 상태 가져오기
    const status = localStorage.getItem("loginStatus");

    // 2. 상태가 없으면 (null 이면) 로그인 페이지로 보냄
    if (!status || (status !== "success" && status !== "admin")) {
        // 이미 index.html에 있다면 무한 루프 방지를 위해 체크
        if (!window.location.href.includes("index.html")) {
            alert("세션이 만료되었거나 로그인이 필요합니다.");
            window.location.href = "../index.html"; // 경로를 index.html 위치에 맞추세요
        }
    }

    // 3. 관리자 배지는 페이지가 다 그려진 후 처리
    window.addEventListener('load', function() {
        if (status === "admin") {
            const badge = document.getElementById("adminBadge");
            if (badge) badge.style.display = "inline";
        }
    });
})();

        // 로그아웃 함수
        function logout() {
            localStorage.removeItem("loginStatus");
            alert("로그아웃 되었습니다.");
            window.location.href = "index.html";
        }
    </script>
</head>
<body class="sub-page">
<nav class="navbar">
    <div class="logo">
        OUT BREAK 
        <span id="adminBadge" style="display: none; color: #ff0000; font-size: 12px; margin-left: 10px; vertical-align: middle;">
            [관리자 모드]
        </span>
    </div>
    <ul class="nav-links">
        <li><a href="main.html">홈</a></li>
        <li><a href="sub.html">생존자목록</a></li>
        <li><a href="board.html">익명게시판</a></li>
        <li><a href="#" onclick="logout()">로그아웃</a></li>
    </ul>
</nav>
    
</body>
</html>
