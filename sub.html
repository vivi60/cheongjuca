<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>생존자 목록</title>
    <link rel="stylesheet" href="style.css">
    <script>
        // 로그인 체크
        (function() {
            const status = localStorage.getItem("loginStatus");
            const nick = localStorage.getItem("userNick");

            if (!status || (status !== "success" && status !== "admin")) {
                if (!window.location.href.includes("index.html")) {
                    alert("생존자만 접근할 수 있습니다.");
                    window.location.href = "index.html";
                }
            }

            window.addEventListener('load', function() {
                const badge = document.getElementById("userBadge");
                if (badge && nick) {
                    if (status === "admin") {
                        badge.innerText = `[관리자 모드]`;
                        badge.style.color = "#ff0000";
                    } else {
                        badge.innerText = `[${nick}]`;
                        badge.style.color = "#cccccc";
                    }
                    badge.style.display = "inline";
                }
                
                // 생존자 목록 생성 실행
                renderSurvivorList();
            });
        })();

        function logout() {
            localStorage.removeItem("loginStatus");
            location.href = "index.html";
        }
    </script>
</head>
<body class="sub-page"> 
    <nav class="navbar">
        <div class="logo">
            OUT BREAK 
            <span id="userBadge" style="display: none; font-size: 14px; margin-left: 10px; vertical-align: middle;"></span>
        </div>
        <ul class="nav-links">
            <li><a href="main.html">홈</a></li>
            <li><a href="sub.html">생존자목록</a></li>
            <li><a href="board.html">자유게시판</a></li>
            <li><a href="quest.html">의뢰게시판</a></li>
            <li><a href="game.html">낚시터</a></li>
            <li><a href="vending.html">자판기</a></li>
            <li><a href="#" onclick="logout()">로그아웃</a></li>
        </ul>
    </nav>

    <div class="survivor-container">
        <h2 style="font-family: 'SchoolSafeBoardMarker'; color: #ab0000; text-align: center; font-size: 40px; margin-bottom: 30px; text-shadow: 2px 2px 0 #000;">
            등록된 생존자 명단
        </h2>

        <div class="survivor-grid" id="survivorList">
            </div>
    </div>

    <script>
    // sub.html 내부 스크립트
const userDB = {
    "13reaking_news":    { nick: "관리자" },
    "runner1":  { nick: "러너1" },
    "13reaking_system":  { nick: "시스템" }
};

// sub.html 내부의 renderSurvivorList 함수 수정
/* sub.html 내 renderSurvivorList 함수 수정 */

function renderSurvivorList() {
    const container = document.getElementById('survivorList'); 
    container.innerHTML = "";

    Object.keys(userDB).forEach(id => {
        const user = userDB[id];
        const div = document.createElement('div');
        // survivor-item을 survivor-card로 변경 (기존 style.css와 맞춤)
        div.className = 'survivor-card'; 
        
        div.onclick = () => { location.href = `profile.html?name=${id}`; };
        
        // 기존 스타일을 유지하기 위해 내부 HTML 구조 복구
        div.innerHTML = `
            <div class="survivor-img-box">
                <img src="https://i.imgur.com/3SPL075.png" alt="프로필">
            </div>
            <div class="survivor-info">
                <h3>${user.nick}</h3>
                <p class="role">생존자</p>
                <p class="desc">생존자 목록에서 상세 정보를 확인하세요.</p>
            </div>
        `;
        container.appendChild(div);
    });
}
    </script>
</body>
</html>