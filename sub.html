<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>생존자 목록</title>
    <link rel="stylesheet" href="style.css"> 
<script>
    (function() {
        const status = localStorage.getItem("loginStatus");
        const nick = localStorage.getItem("userNick"); // 저장된 닉네임 가져오기

        // 1. 로그인 안 된 사람 튕겨내기
        if (!status || (status !== "success" && status !== "admin")) {
            if (!window.location.href.includes("index.html")) {
                alert("로그인이 필요합니다.");
                window.location.href = "index.html";
            }
        }

        // 2. 페이지 로딩 후 닉네임 표시하기
        window.addEventListener('load', function() {
            const badge = document.getElementById("userBadge");
            if (badge && nick) {
                // 관리자면 빨간색, 일반 유저는 흰색이나 회색 등으로 표시
                if (status === "admin") {
                    badge.innerText = `[관리자 모드]`;
                    badge.style.color = "#ff0000";
                } else {
                    badge.innerText = `[${nick}]`; // 예: [러너1]
                    badge.style.color = "#cccccc"; // 일반 유저 색상
                }
                badge.style.display = "inline"; // 숨겨둔 배지를 보이게 함
            }
        });
    })();

        // 로그아웃 함수
        function logout() {
            localStorage.removeItem("loginStatus");
            alert("로그아웃 되었습니다.");
            window.location.href = "index.html";
        }
    </script>
</head>
<body class="sub-page">
<nav class="navbar">
    <div class="logo">
        OUT BREAK 
        <span id="userBadge" style="display: none; font-size: 14px; margin-left: 10px; vertical-align: middle;">
        </span>
    </div>
    <ul class="nav-links">
        <li><a href="main.html">홈</a></li>
        <li><a href="sub.html">생존자목록</a></li>
        <li><a href="board.html">익명게시판</a></li>
        <li><a href="quest.html">의뢰게시판</a></li>
        <li><a href="#" onclick="logout()">로그아웃</a></li>
    </ul>
</nav>
    
</body>
</html>
